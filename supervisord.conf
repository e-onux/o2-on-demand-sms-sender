; Supervisor configuration
[supervisord]
nodaemon=true
logfile=/dev/null
pidfile=/var/run/supervisord.pid

[unix_http_server]
file=/var/run/supervisor.sock

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

; Main job: run the script periodically (one-shot execution per cycle)
[program:sms-runner]
command=/bin/bash -lc 'while true; do       python /app/o2_on_demand_hack.py;       sleep ${INTERVAL_SECONDS:-900};     done'
autostart=true
autorestart=true
startretries=999
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
stopasgroup=true
killasgroup=true
environment=PYTHONPATH="/app"
